<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>presto系列软件的安装与使用 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="实习日记安装指北presto-c" />
  
  
  
  
  <meta name="description" content="presto系列软件的安装与使用 fftw">
<meta property="og:type" content="article">
<meta property="og:title" content="presto系列软件的安装与使用">
<meta property="og:url" content="http://example.com/2022/03/31/presto%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="presto系列软件的安装与使用 fftw">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/pgplot.png">
<meta property="article:published_time" content="2022-03-31T03:23:10.000Z">
<meta property="article:modified_time" content="2023-08-25T03:24:17.941Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="实习日记">
<meta property="article:tag" content="安装指北">
<meta property="article:tag" content="presto-c">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/pgplot.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" rel="home" >
                <img style="margin-bottom: 10px;"  width="124px" height="124px" alt="Hike News" src="https://hexo.io/logo.svg">
              </a>
            
          </h1>
          
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="archives"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="tags"> <a class="" href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="about"> <a class="" href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-presto系列软件的安装与使用" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      presto系列软件的安装与使用
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2022/03/31/presto%E7%B3%BB%E5%88%97%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" class="article-date">
	  <time datetime="2022-03-31T03:23:10.000Z" itemprop="datePublished">March 31, 2022</time>
	</a>

       
      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><code>presto系列软件的安装与使用</code></p>
<h2 id="fftw"><a href="#fftw" class="headerlink" title="fftw"></a>fftw</h2><span id="more"></span>
<p>安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># float</span></span><br><span class="line">./configure --enable-float --prefix=/es01/yeesuan/yeesuan003/software/fftw CC=gcc F77=gfortran --enable-shared --enable-static --enable-sse --enable-sse2 --enable-avx --enable-avx2 --enable-fma --enable-mpi --enable-threads --enable-openmp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">make -j &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">make clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># double</span></span><br><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/fftw3d CC=gcc F77=gfortran --enable-shared --enable-static --enable-sse2 --enable-avx --enable-avx2 --enable-fma --enable-mpi --enable-threads --enable-openmp</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>环境变量配置</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/es01/yeesuan/yeesuan003/software/fftw/bin<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br><span class="line"><span class="built_in">export</span> PATH=/es01/yeesuan/yeesuan003/software/fftw3d/bin<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/fftw/lib</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/fftw3d/lib</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/fftw/include</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/fftw3d/include</span><br></pre></td></tr></table></figure>

<p>测试fftw</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;fftw3.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 5</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    fftw_complex *in,*out;</span><br><span class="line">    fftw_plan p;</span><br><span class="line">    in = (fftw_complex*)<span class="built_in">fftw_malloc</span>(<span class="built_in">sizeof</span> (fftw_complex) * N);</span><br><span class="line">    out= (fftw_complex*)<span class="built_in">fftw_malloc</span>(<span class="built_in">sizeof</span> (fftw_complex) * N);</span><br><span class="line">    p= <span class="built_in">fftw_plan_dft_1d</span>(N, in, out, FFTW_FORWARD, FFTW_ESTIMATE);</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">for</span> (n= <span class="number">0</span>; n &lt; N; n++)</span><br><span class="line">    &#123;</span><br><span class="line">        in[n][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        in[n][<span class="number">1</span>]= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fftw_execute</span>(p);</span><br><span class="line">    <span class="built_in">fftw_destroy_plan</span>(p) ;</span><br><span class="line">    <span class="keyword">for</span> (n = <span class="number">0</span>; n &lt; N ;n++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%3.2lf + %3.2lfi\t&quot;</span>, out[n][<span class="number">0</span>],out[n][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="built_in">fftw_free</span>(in); <span class="built_in">fftw_free</span>(out);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>编译运行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[yeesuan003@spack <span class="built_in">test</span>]$ gcc -o fftwtest fftwtest.c -I/es01/yeesuan/yeesuan003/software/fftw/include -I/es01/yeesuan/yeesuan003/software/fftw3d/include -L/es01/yeesuan/yeesuan003/software/fftw/lib -L/es01/yeesuan/yeesuan003/software/fftw3d/lib -lfftw3 -lfftw3f</span><br><span class="line">[yeesuan003@spack <span class="built_in">test</span>]$ ./fftwtest</span><br><span class="line">5.00 + 10.00i   0.00 + 0.00i    0.00 + 0.00i    0.00 + 0.00i    0.00 + 0.00i</span><br></pre></td></tr></table></figure>

<h2 id="pgplot"><a href="#pgplot" class="headerlink" title="pgplot"></a>pgplot</h2><p>修改<code>drivers.list</code>（去掉一些注释）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> 17 ! GCDRIV 0 /GENICOM   Genicom 4410 dot-matrix printer, landscape</span><br><span class="line"> 18 !             Caution: use of GIDRIV may require a license from Unisys:</span><br><span class="line"> 19   GIDRIV 1 /GIF       GIF-format file, landscape</span><br><span class="line"> 20   GIDRIV 2 /VGIF      GIF-format file, portrait</span><br><span class="line"> 21 ! GLDRIV 1 /HPGL      Hewlett-Packard HP-GL plotters, landscape         Std F77</span><br><span class="line"></span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line"></span><br><span class="line"> 36 ! MFDRIV 0 /FILE      PGPLOT graphics metafile</span><br><span class="line"> 37 ! NEDRIV 0 /NEXT      Computers running NeXTstep operating system</span><br><span class="line"> 38   NUDRIV 0 /NULL      Null device (no output)                           Std F77</span><br><span class="line"> 39 ! PGDRIV 0 /PGMF      PGPLOT metafile (new format, experimental)        Std F77</span><br><span class="line"> 40 ! PNDRIV 1 /PNG       Portable Network Graphics file                    C</span><br><span class="line"> 41 ! PNDRIV 2 /TPNG      Portable Network Graphics file - transparent background C</span><br><span class="line"> 42 ! PPDRIV 1 /PPM       Portable Pixel Map file, landscape</span><br><span class="line"> 43 ! PPDRIV 2 /VPPM      Portable PIxel Map file, portrait</span><br><span class="line"> 44   PSDRIV 1 /PS        PostScript printers, monochrome, landscape        Std F77</span><br><span class="line"> 45   PSDRIV 2 /VPS       Postscript printers, monochrome, portrait         Std F77</span><br><span class="line"> 46   PSDRIV 3 /CPS       PostScript printers, color, landscape             Std F77</span><br><span class="line"> 47   PSDRIV 4 /VCPS      PostScript printers, color, portrait              Std F77</span><br><span class="line"> 48 ! PXDRIV 0 /PRINTRONI Printronix P300 or P600 dot-matrix printer</span><br><span class="line"> 49 ! QMDRIV 1 /QMS       QUIC devices (QMS and Talaris), landscape         Std F77</span><br><span class="line"></span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line"></span><br><span class="line"> 67 ! WDDRIV 1 /WD        X Window dump file, landscape</span><br><span class="line"> 68 ! WDDRIV 2 /VWD       X Window dump file, portrait</span><br><span class="line"> 69 ! WSDRIV 0 /WS        VAX workstations running VWS software             VMS</span><br><span class="line"> 70 ! X2DRIV 0 /XDISP     PGDISP or FIGDISP server for X workstations       C</span><br><span class="line"> 71   XWDRIV 1 /XWINDOW   Workstations running X Window System              C</span><br><span class="line"> 72   XWDRIV 2 /XSERVE    Persistent window on X Window System              C</span><br><span class="line"> 73 ! ZEDRIV 0 /ZETA      Zeta 8 Digital Plotter</span><br><span class="line"> 74 !</span><br><span class="line"> 75 ! The following drivers can only be used in PGPLOT installations on MS-DOS</span><br><span class="line"> 76 ! systems with appropriate hardware and software. Do not select these</span><br><span class="line"> 77 ! on UNIX or VMS systems.</span><br></pre></td></tr></table></figure>

<p>将driver.list拷贝到安装目录下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> drivers.list ~/software/pgplot/</span><br></pre></td></tr></table></figure>


<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># manual</span></span><br><span class="line"><span class="built_in">export</span> PGPLOT_DIR=/es01/yeesuan/yeesuan003/software/pgplot</span><br><span class="line"><span class="built_in">export</span> PGPLOT_DEV=/Xserve</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/pgplot/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/pgplot/include</span><br><span class="line"><span class="built_in">export</span> PGPLOT_FONT=/es01/yeesuan/yeesuan003/software/pgplot/grfont.dat</span><br><span class="line"><span class="built_in">export</span> PGPLOT_LIB=<span class="string">&quot;-L/es01/jnist/software/common/linux-centos7-skylake_avx512/gcc-8.5.0/libx11-1.7.0-2ovdqwa5f77pnonzmft6ttzmblxxibbe/lib -lX11 -L/es01/yeesuan/yeesuan003/software/pgplot/lib -lpgplot&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># spack</span></span><br><span class="line"><span class="built_in">export</span> PGPLOT_DIR=/es01/yeesuan/yeesuan003/software/pgplot</span><br><span class="line"><span class="built_in">export</span> PGPLOT_DEV=/Xserve</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/lhxone-test/spack/software/linux-centos7-skylake_avx512/gcc-8.5.0/pgplot-5.2.2-nwyu3d24mn4mrjgrg2khh34gwxsiegnc/lib/</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/lhxone-test/spack/software/linux-centos7-skylake_avx512/gcc-8.5.0/pgplot-5.2.2-nwyu3d24mn4mrjgrg2khh34gwxsiegnc/include</span><br><span class="line"><span class="built_in">export</span> PGPLOT_FONT=/es01/yeesuan/yeesuan003/software/pgplot/grfont.dat</span><br><span class="line"><span class="built_in">export</span> PGPLOT_LIB=<span class="string">&quot;-L/es01/jnist/software/common/linux-centos7-skylake_avx512/gcc-8.5.0/libx11-1.7.0-2ovdqwa5f77pnonzmft6ttzmblxxibbe/lib -lX11 -L/es01/yeesuan/yeesuan003/software/pgplot/lib -lpgplot&quot;</span></span><br></pre></td></tr></table></figure>


<p>测试，执行<code>./pgdemo1</code>出现下图</p>
<p><img src="/pgplot.png"></p>
<h2 id="tempo2"><a href="#tempo2" class="headerlink" title="tempo2"></a>tempo2</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/tempo2</span><br><span class="line">make -j &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>环境变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> TEMPO2=/es01/yeesuan/yeesuan003/software/tempo2</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/tempo2/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/tempo2/include</span><br></pre></td></tr></table></figure>


<h2 id="libffi"><a href="#libffi" class="headerlink" title="libffi"></a>libffi</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/libffi</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LIBFFI=/es01/yeesuan/yeesuan003/software/libffi</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/libffi/lib64</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/libffi/include</span><br></pre></td></tr></table></figure>


<h2 id="glib"><a href="#glib" class="headerlink" title="glib"></a>glib</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xz -d glib-2.48.1.tar.xz</span><br><span class="line">tar xvf glib-2.48.1.tar</span><br><span class="line"><span class="built_in">cd</span> glib-2.48.1</span><br><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/glib</span><br></pre></td></tr></table></figure>


<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /es01/yeesuan/yeesuan003/software/glib/lib/glib-2.0/include/glibconfig.h /es01/yeesuan/yeesuan003/software/glib/include/glib-2.0</span><br><span class="line"><span class="built_in">export</span> GLIB=/es01/yeesuan/yeesuan003/software/glib</span><br><span class="line"><span class="built_in">export</span> PATH=/es01/yeesuan/yeesuan003/software/glib/bin<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/glib/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/glib/include</span><br></pre></td></tr></table></figure>


<p>测试</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//glibtest.c</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;glib.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    g_printf(<span class="string">&quot;hello world\n&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gcc -o glibtest glibtest.c -I/es01/yeesuan/yeesuan003/software/glib/include/glib-2.0 -L/es01/yeesuan/yeesuan003/software/glib/lib -lglib-2.0</span><br><span class="line">./glibtest</span><br></pre></td></tr></table></figure>

<h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/curl</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/es01/yeesuan/yeesuan003/software/curl/bin<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/curl/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/curl/include</span><br></pre></td></tr></table></figure>

<h2 id="cfitsio"><a href="#cfitsio" class="headerlink" title="cfitsio"></a>cfitsio</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/cfitsio</span><br></pre></td></tr></table></figure>


<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CFITSIO=/es01/yeesuan/yeesuan003/software/cfitsio</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/cfitsio/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/cfitsio/include</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cfitsiotest.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;fitsio.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fitsfile *fptr;         </span><br><span class="line">    <span class="type">char</span> card[FLEN_CARD]; </span><br><span class="line">    <span class="type">int</span> status = <span class="number">0</span>,  nkeys, ii;  <span class="comment">/* MUST initialize status */</span></span><br><span class="line">    <span class="built_in">fits_open_file</span>(&amp;fptr, argv[<span class="number">1</span>], READONLY, &amp;status);</span><br><span class="line">    <span class="built_in">fits_get_hdrspace</span>(fptr, &amp;nkeys, <span class="literal">NULL</span>, &amp;status);</span><br><span class="line">    <span class="keyword">for</span> (ii = <span class="number">1</span>; ii &lt;= nkeys; ii++)  &#123; </span><br><span class="line">      <span class="built_in">fits_read_record</span>(fptr, ii, card, &amp;status); <span class="comment">/* read keyword */</span></span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, card);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;END\n\n&quot;</span>);  <span class="comment">/* terminate listing with END */</span></span><br><span class="line">    <span class="built_in">fits_close_file</span>(fptr, &amp;status);</span><br><span class="line">    <span class="keyword">if</span> (status)          <span class="comment">/* print any error messages */</span></span><br><span class="line">        <span class="built_in">fits_report_error</span>(stderr, status);</span><br><span class="line">    <span class="keyword">return</span>(status);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">g++ -o cfitsiotest cfitsiotest.cpp -L/es01/yeesuan/yeesuan003/software/cfitsio/lib -L/es01/yeesuan/yeesuan003/software/curl/lib -I/es01/yeesuan/yeesuan003/software/cfitsio/include -lm -lcfitsio -lcurl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试样例  https://www.cv.nrao.edu/~sransom/Parkes_70cm_PSR.fits</span></span><br><span class="line">./cfitsiotest Parkes_70cm_PSR.fits</span><br></pre></td></tr></table></figure>

<h2 id="zlib"><a href="#zlib" class="headerlink" title="zlib"></a>zlib</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/zlib</span><br></pre></td></tr></table></figure>


<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ZLIB=/es01/yeesuan/yeesuan003/software/zlib</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/zlib/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/zlib/include</span><br></pre></td></tr></table></figure>

<h2 id="libpng"><a href="#libpng" class="headerlink" title="libpng"></a>libpng</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/es01/yeesuan/yeesuan003/software/libpng LDFLAGS=<span class="string">&quot;-L/es01/yeesuan/yeesuan003/software/zlib/lib -lz&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LIBPNG=/es01/yeesuan/yeesuan003/software/libpng</span><br><span class="line"><span class="built_in">export</span> PATH=/es01/yeesuan/yeesuan003/software/libpng/bin<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/software/libpng/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/software/libpng/include</span><br></pre></td></tr></table></figure>


<h2 id="X11"><a href="#X11" class="headerlink" title="X11"></a>X11</h2><blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;./configure --prefix=/es01/yeesuan/yeesuan003/software/X11</span><br></pre></td></tr></table></figure>

<blockquote>
<p>报错缺少pixman</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;wget https://gitlab.freedesktop.org/pixman/pixman/-/archive/master/pixman-master.tar.gz</span><br><span class="line">&gt;&gt;./configure --prefix=/es01/yeesuan/yeesuan003/software/pixman</span><br></pre></td></tr></table></figure>

<blockquote>
<p>报错缺少autoconf</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;wget http://mirrors.kernel.org/gnu/autoconf/autoconf-latest.tar.gz</span><br><span class="line">&gt;&gt;&gt;./configure --prefix=/es01/yeesuan/yeesuan003/software/autoconf</span><br><span class="line">&gt;&gt;&gt;<span class="built_in">export</span> PATH=/es01/yeesuan/yeesuan003/software/autoconf/bin<span class="variable">$&#123;PATH:+:<span class="variable">$&#123;PATH&#125;</span>&#125;</span></span><br></pre></td></tr></table></figure>
<p>最后的解决办法：<br>在另一台电脑上yum install x11，然后把&#x2F;usr&#x2F;lib64&#x2F;X11文件打包拷贝过来</p>
</blockquote>
</blockquote>
</blockquote>
<h2 id="presto-c"><a href="#presto-c" class="headerlink" title="presto-c"></a>presto-c</h2><p>配置环境变量</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PRESTO=/es01/yeesuan/yeesuan003/source/presto-4.0</span><br><span class="line"><span class="built_in">export</span> PYTHONPATH=/es01/yeesuan/yeesuan003/source/presto-4.0/lib/python</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$LD_LIBRARY_PATH</span>:/es01/yeesuan/yeesuan003/source/presto-4.0/lib</span><br><span class="line"><span class="built_in">export</span> C_INCLUDE_PATH=<span class="variable">$C_INCLUDE_PATH</span>:/es01/yeesuan/yeesuan003/source/presto-4.0/include</span><br></pre></td></tr></table></figure>


<h4 id="libpgplot-so-undefined"><a href="#libpgplot-so-undefined" class="headerlink" title="libpgplot.so:undefined"></a>libpgplot.so:undefined</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 尝试更换PGPLOTINC与PGPLOTLINK，使用源码编译安装或spack安装</span></span><br><span class="line"><span class="comment"># Include and link information for PGPLOT v5.X (including shared libs!)</span></span><br><span class="line"><span class="comment"># Typically you need to have your PGPLOT_DIR environment variable set</span></span><br><span class="line">PGPLOTINC = -I/es01/yeesuan/yeesuan003/software/pgplot/<span class="keyword">include</span></span><br><span class="line">PGPLOTLINK = -L/es01/yeesuan/yeesuan003/software/pgplot/lib -lcpgplot -lpgplot <span class="variable">$(X11LINK)</span> <span class="variable">$(PNGLINK)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="slalib-报错-未解决-但是编译成功了"><a href="#slalib-报错-未解决-但是编译成功了" class="headerlink" title="slalib 报错(未解决,但是编译成功了)"></a>slalib 报错(未解决,但是编译成功了)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">tps2c.f(1): remark #15009: sla_tps2c_ has been targeted for automatic cpu dispatch</span><br><span class="line">tpv2c.f(1): remark #15009: sla_tpv2c_ has been targeted for automatic cpu dispatch</span><br><span class="line">ue2pv.f(1): remark #15009: sla_ue2pv_ has been targeted for automatic cpu dispatch</span><br><span class="line">unpcd.f(1): remark #15009: sla_unpcd_ has been targeted for automatic cpu dispatch</span><br><span class="line">v2tp.f(1): remark #15009: sla_v2tp_ has been targeted for automatic cpu dispatch</span><br><span class="line">vdv.f(1): remark #15009: sla_vdv_ has been targeted for automatic cpu dispatch</span><br><span class="line">vn.f(1): remark #15009: sla_vn_ has been targeted for automatic cpu dispatch</span><br><span class="line">vxv.f(1): remark #15009: sla_vxv_ has been targeted for automatic cpu dispatch</span><br><span class="line">xy2xy.f(1): remark #15009: sla_xy2xy_ has been targeted for automatic cpu dispatch</span><br><span class="line">zd.f(1): remark #15009: sla_zd_ has been targeted for automatic cpu dispatch</span><br><span class="line">gresid.F(2): remark #15009: sla_gresid_ has been targeted for automatic cpu dispatch</span><br><span class="line">rm slalib/sla_test.o</span><br><span class="line">cd slalib ; mpiifort -shared -o /es01/yeesuan/yeesuan003/source/presto-4.0/lib/libsla.so -fno-second-underscore *.o</span><br><span class="line">ifort: command line warning #10006: ignoring unknown option &#x27;-fno-second-underscore&#x27;</span><br><span class="line">cd slalib ; mpiifort -o sla_test sla_test.f -fno-second-underscore -L/es01/yeesuan/yeesuan003/source/presto-4.0/lib -lsla</span><br><span class="line">ifort: command line warning #10006: ignoring unknown option &#x27;-fno-second-underscore&#x27;</span><br><span class="line">sla_test.f(901): remark #15009: t_bear_ has been targeted for automatic cpu dispatch</span><br><span class="line">sla_test.f(4397): remark #15009: t_planet_ has been targeted for automatic cpu dispatch</span><br><span class="line">sla_test.f(5561): remark #15009: t_sep_ has been targeted for automatic cpu dispatch</span><br><span class="line">sla_test.f(5770): remark #15009: t_svd_ has been targeted for automatic cpu dispatch</span><br><span class="line">sla_test.f(6205): remark #15009: t_vecmat_ has been targeted for automatic cpu dispatch</span><br><span class="line">slalib/sla_test</span><br><span class="line"> sla_GMSTA test   fails:</span><br><span class="line">   expected =      3.907497135648731579</span><br><span class="line">   actual =        3.907497135670340072</span><br><span class="line"> sla_PA test zenith fails:</span><br><span class="line">   expected =      0.000000000000000000</span><br><span class="line">   actual =        3.141592653589793116</span><br><span class="line"> SLALIB validation failed!</span><br><span class="line">make: *** [slalib] Error 1</span><br></pre></td></tr></table></figure>

<h4 id="undefined-reference-to-‘cpg-’-undefined-reference-to-XSync’（未解决）"><a href="#undefined-reference-to-‘cpg-’-undefined-reference-to-XSync’（未解决）" class="headerlink" title="undefined reference to ‘cpg***’ &amp;&amp; undefined reference to &#96;XSync’（未解决）"></a>undefined reference to ‘cpg***’ &amp;&amp; undefined reference to &#96;XSync’（未解决）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mpif90 -g -fPIC -Wl,-rpath,/es01/yeesuan/yeesuan003/source/presto-4.0/lib -fopenmp -o /es01/yeesuan/yeesuan003/source/presto-4.0/bin/psrorbit powerplot.o xyline.o psrorbit.o -L/es01/yeesuan/yeesuan003/software/cfitsio/lib -L/es01/yeesuan/yeesuan003/software/curl/lib -lm -lcfitsio -lcurl -L/es01/yeesuan/yeesuan003/source/presto-4.0/lib -lpresto -L/es01/yeesuan/yeesuan003/software/fftw/lib -L/es01/yeesuan/yeesuan003/software/fftw3d/lib  -lfftw3f -lfftw3 -L/es01/yeesuan/yeesuan003/software/pgplot/lib  -lpgplot -L/usr/lib64/X11 -L/es01/yeesuan/yeesuan003/software/libpng/lib -lm</span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: psrorbit.o: in function `main&#x27;:</span><br><span class="line">/es01/yeesuan/yeesuan003/source/presto-4.0/src/psrorbit.c:205: undefined reference to `cpgend&#x27;</span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: powerplot.o: in function `powerplot&#x27;:</span><br><span class="line">/es01/yeesuan/yeesuan003/source/presto-4.0/src/powerplot.c:27: undefined reference to `cpgenv&#x27;</span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: /es01/yeesuan/yeesuan003/source/presto-4.0/src/powerplot.c:30: undefined reference to `cpgscf&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line">···</span><br><span class="line"></span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: /es01/yeesuan/yeesuan003/software/pgplot/lib/libpgplot.so: undefined reference to `XGetSelectionOwner&#x27;</span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: /es01/yeesuan/yeesuan003/software/pgplot/lib/libpgplot.so: undefined reference to `XCloseDisplay&#x27;</span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: /es01/yeesuan/yeesuan003/software/pgplot/lib/libpgplot.so: undefined reference to `XSync&#x27;</span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: /es01/yeesuan/yeesuan003/software/pgplot/lib/libpgplot.so: undefined reference to `XMapRaised&#x27;</span><br><span class="line">/es01/jnist/software/common/linux-centos7-haswell/gcc-4.8.5/binutils-2.37-7zolnrfrz4erct4f54lkgdpne3p6xj3z/bin/ld: /es01/yeesuan/yeesuan003/software/pgplot/lib/libpgplot.so: undefined reference to `XPutImage&#x27;</span><br><span class="line">collect2: error: ld returned 1 exit status</span><br><span class="line">make: *** [psrorbit] Error 1</span><br></pre></td></tr></table></figure>

<ol>
<li>尝试使用spack load pgplot，无效</li>
<li>尝试更换pgplot版本（原版本pgplot5.2），更换为<a href="ftp://ftp.astro.caltech.edu/pub/pgplot/pgplot522.tar.gzpgplot">552版本</a>，无效</li>
<li>尝试从源码编译x11，无效，找不到<code>X11/Xos.h</code></li>
</ol>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">(base) [yeesuan003@spack bin]$ ./readfile</span><br><span class="line">   [-page] [-byte] [-b] [-<span class="built_in">float</span>] [-f] [-double] [-d] [-fcomplex] [-<span class="built_in">fc</span>] [-dcomplex] [-dc] [-short] [-s] [-int] [-i] [-long] [-l] [-rzwcand] [-rzw] [-bincand] [-bin] [-position] [-pos] [-pkmb] [-bcpm] [-wapp] [-spigot] [-filterbank] [-psrfits] [-fortran] [-index [index]] [-nph nph] [--] file</span><br><span class="line">      Reads raw data from a binary file and displays it on stdout.</span><br><span class="line">          -page: Paginate the output like <span class="string">&#x27;more&#x27;</span></span><br><span class="line">          -byte: Raw data <span class="keyword">in</span> byte format</span><br><span class="line">             -b: Raw data <span class="keyword">in</span> byte format</span><br><span class="line">         -<span class="built_in">float</span>: Raw data <span class="keyword">in</span> floating point format</span><br><span class="line">             -f: Raw data <span class="keyword">in</span> floating point format</span><br><span class="line">        -double: Raw data <span class="keyword">in</span> double precision format</span><br><span class="line">             -d: Raw data <span class="keyword">in</span> double precision format</span><br><span class="line">      -fcomplex: Raw data <span class="keyword">in</span> float-complex format</span><br><span class="line">            -<span class="built_in">fc</span>: Raw data <span class="keyword">in</span> float-complex format</span><br><span class="line">      -dcomplex: Raw data <span class="keyword">in</span> double-complex format</span><br><span class="line">            -dc: Raw data <span class="keyword">in</span> double-complex format</span><br><span class="line">         -short: Raw data <span class="keyword">in</span> short format</span><br><span class="line">             -s: Raw data <span class="keyword">in</span> short format</span><br><span class="line">           -int: Raw data <span class="keyword">in</span> <span class="built_in">integer</span> format</span><br><span class="line">             -i: Raw data <span class="keyword">in</span> <span class="built_in">integer</span> format</span><br><span class="line">          -long: Raw data <span class="keyword">in</span> long format</span><br><span class="line">             -l: Raw data <span class="keyword">in</span> long format</span><br><span class="line">       -rzwcand: Raw data <span class="keyword">in</span> rzw search candidate format</span><br><span class="line">           -rzw: Raw data <span class="keyword">in</span> rzw search candidate format</span><br><span class="line">       -bincand: Raw data <span class="keyword">in</span> bin search candidate format</span><br><span class="line">           -bin: Raw data <span class="keyword">in</span> bin search candidate format</span><br><span class="line">      -position: Raw data <span class="keyword">in</span> position struct format</span><br><span class="line">           -pos: Raw data <span class="keyword">in</span> position struct format</span><br><span class="line">          -pkmb: Raw data <span class="keyword">in</span> Parkes Multibeam format</span><br><span class="line">          -bcpm: Raw data <span class="keyword">in</span> BCPM format</span><br><span class="line">          -wapp: Raw data <span class="keyword">in</span> WAPP format</span><br><span class="line">        -spigot: Raw data <span class="keyword">in</span> Spigot Card format</span><br><span class="line">    -filterbank: Raw data <span class="keyword">in</span> SIGPROC filterbank format</span><br><span class="line">       -psrfits: Raw data <span class="keyword">in</span> PSRFITS format</span><br><span class="line">       -fortran: Raw data was written by a fortran program</span><br><span class="line">         -index: The range of objects to display</span><br><span class="line">                 0...2 int values between -1 and oo</span><br><span class="line">                 default: `0<span class="string">&#x27; ` -1&#x27;</span></span><br><span class="line">           -nph: 0th FFT bin amplitude (<span class="keyword">for</span> <span class="string">&#x27;RZW&#x27;</span> data)</span><br><span class="line">                 1 double value</span><br><span class="line">                 default: `1.0<span class="string">&#x27;</span></span><br><span class="line"><span class="string">           file: Input data file name.</span></span><br><span class="line"><span class="string">                 1 value</span></span><br><span class="line"><span class="string">  version: 12Mar10</span></span><br></pre></td></tr></table></figure>

<h2 id="Anaconda"><a href="#Anaconda" class="headerlink" title="Anaconda"></a>Anaconda</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://repo.anaconda.com/archive/Anaconda3-2021.11-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>




<h2 id="pySLALIB"><a href="#pySLALIB" class="headerlink" title="pySLALIB"></a>pySLALIB</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://files.pythonhosted.org/packages/3e/e1/e731f0b69d9145faa2aa321a82ff27d6da1d929ac02d7206ca5ae6ec23e3/pySLALIB-1.0.4.tar.gz</span><br></pre></td></tr></table></figure>




<h2 id="presto-python"><a href="#presto-python" class="headerlink" title="presto-python"></a>presto-python</h2><p>修改<code>setup.py</code></p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ppgplot_libraries = [<span class="string">&quot;gfortran&quot;</span>, <span class="string">&quot;cpgplot&quot;</span>, <span class="string">&quot;pgplot&quot;</span>, <span class="string">&quot;X11&quot;</span>, <span class="string">&quot;png&quot;</span>, <span class="string">&quot;m&quot;</span>]</span><br><span class="line">ppgplot_library_dirs = [<span class="string">&quot;/usr/lib64&quot;</span>, <span class="string">&quot;/es01/jnist/software/common/linux-centos7-skylake_avx512/gcc-8.5.0/libx11-1.7.0-2ovdqwa5f77pnonzmft6ttzmblxxibbe/lib&quot;</span>]</span><br><span class="line"></span><br><span class="line">presto_libraries = [<span class="string">&quot;presto&quot;</span>, <span class="string">&quot;fftw3&quot;</span>, <span class="string">&quot;m&quot;</span>]</span><br><span class="line">presto_library_dirs = [<span class="string">&quot;/es01/yeesuan/yeesuan003/software/fftw/lib&quot;</span>, <span class="string">&quot;/es01/jnist/software/common/linux-centos7-skylake_avx512/gcc-8.5.0/libx11-1.7.0-2ovdqwa5f77pnonzmft6ttzmblxxibbe/lib&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">####  ~Lines~  #####</span></span><br><span class="line"><span class="comment">####  ~Lines~  #####</span></span><br><span class="line"><span class="comment">####  ~Lines~  #####</span></span><br><span class="line"><span class="comment">####  ~Lines~  #####</span></span><br><span class="line"><span class="comment">####  ~Lines~  #####</span></span><br><span class="line"></span><br><span class="line">setup(name=<span class="string">&quot;presto&quot;</span>,</span><br><span class="line">      version=version,</span><br><span class="line">      install_requires=[<span class="string">&#x27;numpy&#x27;</span>, <span class="string">&#x27;future&#x27;</span>, <span class="string">&#x27;six&#x27;</span>, <span class="string">&#x27;scipy&#x27;</span>, <span class="string">&#x27;matplotlib&#x27;</span>, <span class="string">&#x27;astropy&#x27;</span>, <span class="string">&#x27;pyslalib&#x27;</span>],</span><br><span class="line">      <span class="comment"># scripts=scripts,</span></span><br><span class="line">      description=<span class="string">&quot;Python interfaces to PGPLOT and PRESTO&quot;</span>,</span><br><span class="line">      author=<span class="string">&quot;Scott Ransom (ppgplot from Nick Patavlis)&quot;</span>,</span><br><span class="line">      author_email=<span class="string">&quot;sransom@nrao.edu&quot;</span>,</span><br><span class="line">      url=<span class="string">&quot;https://github.com/scottransom/presto&quot;</span>,</span><br><span class="line">      packages=[<span class="string">&#x27;presto&#x27;</span>, <span class="string">&#x27;presto.ppgplot&#x27;</span>, <span class="string">&#x27;presto.presto&#x27;</span>, <span class="string">&#x27;presto.singlepulse&#x27;</span>],</span><br><span class="line">      package_dir=&#123;<span class="string">&#x27;presto.ppgplot&#x27;</span>: <span class="string">&#x27;python/ppgplot_src&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;presto.presto&#x27;</span>: <span class="string">&#x27;python/presto_src&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;presto&#x27;</span>: <span class="string">&#x27;python/presto&#x27;</span>,</span><br><span class="line">                   <span class="string">&#x27;presto.singlepulse&#x27;</span>: <span class="string">&#x27;python/presto/singlepulse&#x27;</span>,</span><br><span class="line">                   &#125;,</span><br><span class="line">      package_data=&#123;<span class="string">&#x27;presto&#x27;</span>: [<span class="string">&#x27;*.json&#x27;</span>]&#125;,</span><br><span class="line">      ext_modules=[ext_ppgplot, ext_presto, ext_fftfit])</span><br></pre></td></tr></table></figure>

<p>执行以下命令安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CC=<span class="string">&#x27;gcc -std=c99&#x27;</span> python3 setup.py install --home=<span class="variable">$&#123;PRESTO&#125;</span></span><br></pre></td></tr></table></figure>

<p>环境变量配置</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> <span class="built_in">export</span> PYTHONPATH=/es01/yeesuan/yeesuan003/source/presto-4.0/lib/python/presto-4.0-py3.9-linux-x86_64.egg</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(base) [yeesuan003@spack presto-4.0]$ <span class="built_in">cd</span> bin/</span><br><span class="line">(base) [yeesuan003@spack bin]$ ./DDplan.py</span><br><span class="line"></span><br><span class="line">    usage:  DDplan.py [options] [raw PSRFITS or filterbank file]</span><br><span class="line">  [-h, --<span class="built_in">help</span>]                    : Display this <span class="built_in">help</span></span><br><span class="line">  [-o outfile, --outfile=outfile] : Output .eps plot file (default is xwin)</span><br><span class="line">  [-l loDM, --loDM=loDM]          : Low DM to search   (default = 0 pc cm-3)</span><br><span class="line">  [-d hiDM, --hiDM=HIDM]          : High DM to search  (default = 1000 pc cm-3)</span><br><span class="line">  [-f fctr, --fctr=fctr]          : Center frequency   (default = 1400MHz)</span><br><span class="line">  [-b BW, --bw=bandwidth]         : Bandwidth <span class="keyword">in</span> MHz   (default = 300MHz)</span><br><span class="line">  [-n <span class="comment">#chan, --numchan=#chan]     : Number of channels (default = 1024)</span></span><br><span class="line">  [-k blocklen, --blocklen=<span class="comment">#spec] : Spectra per subint (for downsampling) (default = 1024)</span></span><br><span class="line">  [-c cDM, --cohdm=cDM]           : Coherent DM <span class="keyword">in</span> each chan  (default = 0.0)</span><br><span class="line">  [-t dt, --dt=dt]                : Sample time (s)    (default = 0.000064 s)</span><br><span class="line">  [-s subbands, --subbands=nsub]  : Number of subbands (default = <span class="comment">#chan)</span></span><br><span class="line">  [-r resolution, --res=res]      : Acceptable time resolution (ms)</span><br><span class="line">  [-w, --write]                   : Write a dedisp.py file <span class="keyword">for</span> the plan</span><br><span class="line"></span><br><span class="line">  The program generates a good plan <span class="keyword">for</span> de-dispersing raw data.  It</span><br><span class="line">  trades a small amount of sensitivity <span class="keyword">in</span> order to save computation costs.</span><br><span class="line">  It will determine the observation parameters from the raw data file</span><br><span class="line">  <span class="keyword">if</span> it exists.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="fitsio"><a href="#fitsio" class="headerlink" title="fitsio"></a>fitsio</h2><p>地址：<code>https://github.com/esheldon/fitsio</code></p>
<p>解压并进入<code>cfitsio3490</code>目录，执行<code>./configure</code>,<code>make</code>,<code>make install</code></p>
<p>进入上层目录，执行<code>python3 setup.py install</code></p>
<h2 id="mpi4py"><a href="#mpi4py" class="headerlink" title="mpi4py"></a>mpi4py</h2><p>安装</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install mpi4py</span><br></pre></td></tr></table></figure>

<p>测试</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mpi_helloworld.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mpi4py <span class="keyword">import</span> MPI</span><br><span class="line"></span><br><span class="line">comm = MPI.COMM_WORLD</span><br><span class="line">size = comm.Get_size()</span><br><span class="line">rank = comm.Get_rank()</span><br><span class="line">node_name = MPI.Get_processor_name() <span class="comment"># get the name of the node</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Hello world from process &#123;0&#125; at &#123;1&#125;.&#x27;</span>.<span class="built_in">format</span>(rank, node_name))</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpiexec -n 3 python3 test.py</span><br></pre></td></tr></table></figure>


<h2 id="presto-c的spack安装代码"><a href="#presto-c的spack安装代码" class="headerlink" title="presto-c的spack安装代码"></a>presto-c的spack安装代码</h2><figure class="highlight python"><figcaption><span>package.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> spack <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrestoC</span>(<span class="title class_ inherited__">MakefilePackage</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;presto-c By lhxone&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">FIXME:</span> Add a proper url for your package&#x27;s homepage here.</span></span><br><span class="line">    homepage = <span class="string">&quot;https://blog.lhxone.com&quot;</span></span><br><span class="line">    url      = <span class="string">&quot;file:///es01/yeesuan/yeesuan003/source/presto-c.tar.gz&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">FIXME:</span> Add a list of GitHub accounts to</span></span><br><span class="line">    <span class="comment"># notify when the package is updated.</span></span><br><span class="line">    <span class="comment"># maintainers = [&#x27;github_user1&#x27;, &#x27;github_user2&#x27;]</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    version(<span class="string">&#x27;1.2.4&#x27;</span>, <span class="string">&#x27;c7d69f3eb8680a54541d3525fbe46159539037aa6a5fb5ae59fb210a9e0034b1&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">    variant(<span class="string">&#x27;mpi&#x27;</span>, default=<span class="literal">False</span>, description=<span class="string">&#x27;Enable MPI&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    depends_on(<span class="string">&#x27;libx11&#x27;</span>)</span><br><span class="line">    depends_on(<span class="string">&#x27;cfitsio&#x27;</span>)</span><br><span class="line">    depends_on(<span class="string">&#x27;pgplot&#x27;</span>)</span><br><span class="line">    depends_on(<span class="string">&#x27;libpng&#x27;</span>)</span><br><span class="line">    depends_on(<span class="string">&#x27;fftw&#x27;</span>)</span><br><span class="line">    depends_on(<span class="string">&#x27;curl&#x27;</span>)</span><br><span class="line">    depends_on(<span class="string">&#x27;mpi&#x27;</span>, when = <span class="string">&#x27;+mpi&#x27;</span>)</span><br><span class="line">    depends_on(<span class="string">&#x27;gglib&#x27;</span>, <span class="built_in">type</span>=(<span class="string">&#x27;build&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_build_environment</span>(<span class="params">self, env</span>):</span><br><span class="line">        env.append_path(<span class="string">&#x27;LD_LIBRARY_PATH&#x27;</span>, self.stage.source_path + <span class="string">&#x27;/lib&#x27;</span>)</span><br><span class="line">        env.<span class="built_in">set</span>(<span class="string">&#x27;PRESTO&#x27;</span>, self.stage.source_path)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">edit</span>(<span class="params">self, spec, prefix</span>):</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">with</span> working_dir(<span class="string">&#x27;src&#x27;</span>):</span><br><span class="line">            makefile = FileFilter(<span class="string">&#x27;Makefile&#x27;</span>)</span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*X11LINK\s*:=.*&#x27;</span>,  <span class="string">&#x27;X11LINK := -L&#x27;</span> + spec[<span class="string">&#x27;libx11&#x27;</span>].prefix.lib +<span class="string">&#x27; -lX11&#x27;</span>)</span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*PNGLINK\s*:=.*&#x27;</span>, <span class="string">&#x27;PNGLINK := -L&#x27;</span> + spec[<span class="string">&#x27;libpng&#x27;</span>].prefix.lib + <span class="string">&#x27; -lpng&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*PGPLOTINC\s*=.*&#x27;</span>, <span class="string">&#x27;PGPLOTINC = -I&#x27;</span> + spec[<span class="string">&#x27;pgplot&#x27;</span>].prefix.include)</span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*PGPLOTLINK\s*=.*&#x27;</span>,  <span class="string">&#x27;PGPLOTLINK = -L&#x27;</span>  + spec[<span class="string">&#x27;pgplot&#x27;</span>].prefix.lib + <span class="string">&#x27; -lcpgplot -lpgplot $(X11LINK) $(PNGLINK)&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># makefile.filter(r&#x27;^\s*FFTINC\s*:=.*&#x27;,  &#x27;FFTINC := -I&#x27;  + spec[&#x27;fftw&#x27;].prefix.include)</span></span><br><span class="line">            <span class="comment"># makefile.filter(r&#x27;^\s*FFTLINK\s*:=.*&#x27;,  &#x27;FFTLINK := -L&#x27;  + spec[&#x27;fftw&#x27;].prefix.lib + &#x27; -lfftw3 -lfftw3f&#x27;)</span></span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*FFTINC\s*:=.*&#x27;</span>,  <span class="string">&#x27;FFTINC := -I/es01/yeesuan/yeesuan003/software/fftw/include&#x27;</span>)</span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*FFTLINK\s*:=.*&#x27;</span>,  <span class="string">&#x27;FFTLINK := -L/es01/yeesuan/yeesuan003/software/fftw/lib -lfftw3 -lfftw3f&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># makefile.filter(r&#x27;^\s*CFITSIOINC\s*:=.*&#x27;, &#x27;CFITSIOINC := -I/es01/yeesuan/yeesuan003/software/cfitsio/include&#x27;)</span></span><br><span class="line">            <span class="comment"># makefile.filter(r&#x27;^\s*CFITSIOLINK\s*:=.*&#x27;, &#x27;CFITSIOLINK := -L/es01/yeesuan/yeesuan003/software/cfitsio/lib &#x27;)</span></span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*CFITSIOINC\s*:=.*&#x27;</span>, <span class="string">&#x27;CFITSIOINC := -I&#x27;</span> + spec[<span class="string">&#x27;cfitsio&#x27;</span>].prefix.include)</span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*CFITSIOLINK\s*:=.*&#x27;</span>, <span class="string">&#x27;CFITSIOLINK := -L&#x27;</span> + spec[<span class="string">&#x27;cfitsio&#x27;</span>].prefix.lib + <span class="string">&#x27; -L&#x27;</span> + spec[<span class="string">&#x27;curl&#x27;</span>].prefix.lib + <span class="string">&#x27; -lm -lcfitsio -lcurl&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">#如果使用spec[&#x27;glib&#x27;]会报错</span></span><br><span class="line">            <span class="comment"># ==&gt; [2022-04-07-11:11:19.715615] Releasing read lock on fftw-3.3.10-sm7gxt7rfyvosnyv5nztr2ynnai2uv3d</span></span><br><span class="line">            <span class="comment"># ==&gt; [2022-04-07-11:11:19.716372] Error: presto-c-1.2.3-y6i7lvlmsuxopndcmd5voa5i75dkqwu7: Package was not installed</span></span><br><span class="line">            <span class="comment"># ==&gt; [2022-04-07-11:11:19.716511] InstallError: Installation request failed.  Refer to reported errors for failing package(s).</span></span><br><span class="line">            <span class="comment"># ==&gt; [2022-04-07-11:11:19.716556] Error: Installation request failed.  Refer to reported errors for failing package(s).</span></span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*GLIBINC\s*:=.*&#x27;</span>, <span class="string">&#x27;GLIBINC := -I&#x27;</span> + spec[<span class="string">&#x27;gglib&#x27;</span>].prefix.include + <span class="string">&#x27;/glib-2.0&#x27;</span>)</span><br><span class="line">            makefile.<span class="built_in">filter</span>(<span class="string">r&#x27;^\s*GLIBLINK\s*:=.*&#x27;</span>, <span class="string">&#x27;GLIBLINK := -L&#x27;</span> + spec[<span class="string">&#x27;gglib&#x27;</span>].prefix.lib + <span class="string">&#x27; -lglib-2.0&#x27;</span>)</span><br><span class="line">            <span class="comment"># makefile.filter(r&#x27;^\s*GLIBINC\s*:=.*&#x27;, &#x27;GLIBINC := -I/es01/yeesuan/yeesuan003/software/glib/include/glib-2.0&#x27;)</span></span><br><span class="line">            <span class="comment"># makefile.filter(r&#x27;^\s*GLIBLINK\s*:=.*&#x27;, &#x27;GLIBLINK := -L/es01/yeesuan/yeesuan003/software/glib/lib -lglib-2.0&#x27;)</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># Enable mpi</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;+mpi&#x27;</span> <span class="keyword">in</span> self.spec:</span><br><span class="line">                makefile.<span class="built_in">filter</span>(<span class="string">&#x27;(mpicc)&#x27;</span>, <span class="string">&#x27;mpiicc&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">build</span>(<span class="params">self, spec, prefix</span>):</span><br><span class="line">        <span class="keyword">with</span> working_dir(<span class="string">&#x27;src&#x27;</span>):</span><br><span class="line">            make(<span class="string">&#x27;makewisdom&#x27;</span>)</span><br><span class="line">            make(<span class="string">&#x27;prep&#x27;</span>)</span><br><span class="line">            make()</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;+mpi&#x27;</span> <span class="keyword">in</span> self.spec:</span><br><span class="line">                make(<span class="string">&#x27;mpi&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">install</span>(<span class="params">self, spec, prefix</span>):</span><br><span class="line">        mkdir(prefix.<span class="built_in">bin</span>)</span><br><span class="line">        <span class="keyword">with</span> working_dir(<span class="string">&#x27;bin&#x27;</span>):</span><br><span class="line">            install(<span class="string">&#x27;*&#x27;</span>, prefix.<span class="built_in">bin</span>)</span><br><span class="line"></span><br><span class="line">        mkdir(prefix.lib)</span><br><span class="line">        <span class="keyword">with</span> working_dir(<span class="string">&#x27;lib&#x27;</span>):</span><br><span class="line">            install(<span class="string">&#x27;*&#x27;</span>, prefix.lib)</span><br><span class="line"></span><br><span class="line">        mkdir(prefix.include)</span><br><span class="line">        <span class="keyword">with</span> working_dir(<span class="string">&#x27;include&#x27;</span>):</span><br><span class="line">            install(<span class="string">&#x27;*&#x27;</span>, prefix.include)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/presto-c/" rel="tag">presto-c</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8C%97/" rel="tag">安装指北</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E4%B9%A0%E6%97%A5%E8%AE%B0/" rel="tag">实习日记</a></li></ul>

      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC8yOTQ4MS82MDQ5">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/04/01/spack-Makefile%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          spack-Makefile使用手册
        
      </div>
    </a>
  
  
    <a href="/2022/03/08/FVCOM%E7%BC%96%E8%AF%91-%E6%B5%8B%E8%AF%95/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">FVCOM编译&amp;测试</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#fftw"><span class="nav-number">1.</span> <span class="nav-text">fftw</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pgplot"><span class="nav-number">2.</span> <span class="nav-text">pgplot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tempo2"><span class="nav-number">3.</span> <span class="nav-text">tempo2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#libffi"><span class="nav-number">4.</span> <span class="nav-text">libffi</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#glib"><span class="nav-number">5.</span> <span class="nav-text">glib</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#curl"><span class="nav-number">6.</span> <span class="nav-text">curl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cfitsio"><span class="nav-number">7.</span> <span class="nav-text">cfitsio</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zlib"><span class="nav-number">8.</span> <span class="nav-text">zlib</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#libpng"><span class="nav-number">9.</span> <span class="nav-text">libpng</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#X11"><span class="nav-number">10.</span> <span class="nav-text">X11</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#presto-c"><span class="nav-number">11.</span> <span class="nav-text">presto-c</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#libpgplot-so-undefined"><span class="nav-number">11.0.1.</span> <span class="nav-text">libpgplot.so:undefined</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#slalib-%E6%8A%A5%E9%94%99-%E6%9C%AA%E8%A7%A3%E5%86%B3-%E4%BD%86%E6%98%AF%E7%BC%96%E8%AF%91%E6%88%90%E5%8A%9F%E4%BA%86"><span class="nav-number">11.0.2.</span> <span class="nav-text">slalib 报错(未解决,但是编译成功了)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#undefined-reference-to-%E2%80%98cpg-%E2%80%99-undefined-reference-to-XSync%E2%80%99%EF%BC%88%E6%9C%AA%E8%A7%A3%E5%86%B3%EF%BC%89"><span class="nav-number">11.0.3.</span> <span class="nav-text">undefined reference to ‘cpg***’ &amp;&amp; undefined reference to &#96;XSync’（未解决）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%8B%E8%AF%95"><span class="nav-number">11.0.4.</span> <span class="nav-text">测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Anaconda"><span class="nav-number">12.</span> <span class="nav-text">Anaconda</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pySLALIB"><span class="nav-number">13.</span> <span class="nav-text">pySLALIB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#presto-python"><span class="nav-number">14.</span> <span class="nav-text">presto-python</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fitsio"><span class="nav-number">15.</span> <span class="nav-text">fitsio</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mpi4py"><span class="nav-number">16.</span> <span class="nav-text">mpi4py</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#presto-c%E7%9A%84spack%E5%AE%89%E8%A3%85%E4%BB%A3%E7%A0%81"><span class="nav-number">17.</span> <span class="nav-text">presto-c的spack安装代码</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2023 Hexo All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/bootstrap.js"></script>


<script src="/js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
